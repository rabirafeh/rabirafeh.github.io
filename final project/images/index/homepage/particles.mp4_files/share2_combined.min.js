namespace("vimeo.share");(function(){"use strict";vimeo.share.Social=function(clip_id,referrer_context){var self=this;self.clip_id=clip_id;self.createElements();self.attachEvents();self.updateTimecode();self.refreshTracking(referrer_context);return self};vimeo.share.Social.prototype.createElements=function(){var self=this,social_method;self.share_icons_container=$("#share_social_icons");self.url_input=$("#share_link input").first();if(self.clip_id){self.timecode_wrapper=$(".js-timecode-wrapper");self.timecode_display=self.timecode_wrapper.find(".timecode");self.timecode_checkbox=self.timecode_wrapper.find('input[type="checkbox"]')}};vimeo.share.Social.prototype.attachEvents=function(){var self=this;self.share_icons_container.on("click","a",self.onLinkClick.bind(self));if(self.clip_id){self.url_input.on("click",self.onShareInputClick.bind(self));self.timecode_checkbox.on("change",self.onTimecodeChange.bind(self));self.timecode_display.on("blur",self.onTimecodeInputBlur.bind(self));Signal.share.lightbox.opened.add(self.updateTimecode.bind(self))}};vimeo.share.Social.prototype.updateTimecode=function(){var self=this;if(vimeo.active_player&&vimeo.active_player.currentTime>0){self.timecode_display.attr("data-seconds",Math.round(vimeo.active_player.currentTime));if(typeof NumberUtility!=="undefined"&&NumberUtility.formatTimecode){self.timecode_display.val(NumberUtility.formatTimecode(Math.round(vimeo.active_player.currentTime)))}else if(typeof $.formatTimecode!=="undefined"){self.timecode_display.val($.formatTimecode(Math.round(vimeo.active_player.currentTime)))}}};vimeo.share.Social.prototype.generateWindowParams=function(share_link){var window_options={width:share_link.attr("data-width")||500,height:share_link.attr("data-height")||300},window_params="";window_options.left=window.screenLeft+($(window).width()/2-window_options.width/2);window_options.top=window.screenTop+($(window).height()/2-window_options.height/2);for(var key in window_options){if(window_options.hasOwnProperty(key)){window_params+=key;window_params+="=";window_params+=window_options[key];window_params+=","}}return window_params.slice(0,-1)};vimeo.share.Social.prototype.selectShareLink=function(){var self=this;self.url_input.focus();self.url_input.select()};vimeo.share.Social.prototype.parseTimecode=function(timecode){timecode+="";var seconds=0,matches=timecode.match(/^([0-9:]+)/);if(matches!==null){var segments=timecode.split(":").reverse();seconds=parseInt(segments[0],10);if(segments[1]){seconds+=parseInt(segments[1],10)*60}if(segments[2]){seconds+=parseInt(segments[2],10)*60*60}}return seconds};vimeo.share.Social.prototype.appendTimecodeToShareLink=function(duration){var self=this;if(!duration){return}self.url_input.val(self.getBaseShareLink()+"#t="+Math.round(duration)+"s");self.url_input[0].scrollLeft=999};vimeo.share.Social.prototype.getBaseShareLink=function(){return this.url_input.val().split("#")[0]};vimeo.share.Social.prototype.resetShareLink=function(){var self=this;self.url_input.val(self.getBaseShareLink());self.url_input[0].scrollLeft=0};vimeo.share.Social.prototype.refreshTracking=function(referrer_context){var self=this;if(typeof referrer_context!=="undefined"){$("a[data-service]",self.share_icons_container).each(function(i,social_link){social_link.setAttribute("data-fatal-attraction","container:"+referrer_context+"|component:success_share|keyword:"+social_link.getAttribute("data-service"))})}};vimeo.share.Social.prototype.onLinkClick=function(e){e.preventDefault();var self=this,link=$(e.target),service=link.attr("data-service");if(!!self.share_window){self.share_window.close()}$.ajax({url:"/"+self.clip_id,type:"post",data:{action:"log_onsite_click",type:"player2_share_"+service,clip_id:self.clip_id,context:"none",token:vimeo.xsrft}});self.share_window=window.open(link.attr("href"),"Share",self.generateWindowParams(link))};vimeo.share.Social.prototype.onShareInputClick=function(e){var self=this,input=$(e.target);if(!input.attr("data-ios")){e.preventDefault();self.selectShareLink()}self.timecode_wrapper.removeClass("hide");if(typeof vimeo.GlobalDesktop!=="undefined"){vimeo.GlobalDesktop.triggerResize()}};vimeo.share.Social.prototype.onTimecodeChange=function(e){var self=this;if(self.timecode_checkbox[0].checked){self.appendTimecodeToShareLink(self.timecode_display.attr("data-seconds"))}else{self.resetShareLink()}};vimeo.share.Social.prototype.onTimecodeInputBlur=function(e){var self=this,seconds=self.parseTimecode(self.timecode_display.val());self.timecode_display.attr("data-seconds",seconds);if(self.timecode_checkbox[0].checked){self.appendTimecodeToShareLink(seconds)}else{self.resetShareLink()}}})();namespace("vimeo.share");namespace("vimeo.ui.forager");(function(Forager){"use strict";var EMAIL_CONFIRM_KEYS=[13,188,186],KEYS={ENTER:13,COMMA:188,SEMICOLON:186};vimeo.share.Email=function(clip_id){var self=this;self.clip_id=clip_id;self.createElements();self.attachEvents()};vimeo.share.Email.prototype.createElements=function(){var self=this,forager_options={defer:false};self.email_form=$("#share_email").find("form");if(self.email_form.find(".js-defer").length){forager_options={defer_until_focus:true}}if(typeof Forager!=="undefined"){self.forager=new Forager(forager_options)}else{self.email_form.hide()}self.active_input=self.email_form.find(".fg_search");self.message_input=$("#message");self.object_id=$("#object_id");self.submit_btn=self.email_form.find('button[type="submit"]');self.cancel_submit_btn=$("#cancel_submit");self.success_banner=$("#submit_success");self.failure_banner=$("#submit_failure");self.no_recipients=$("#no_recipients");self.recaptcha_error=$("#recaptcha_error")};vimeo.share.Email.prototype.attachEvents=function(){var self=this;self.resetCaptcha();self.email_form.on("submit",self.onFormSubmit.bind(self));self.submit_btn.on("click",self.submitForm.bind(self));self.active_input.on("keydown",self.onInputKeydown.bind(self));self.active_input.one("focus",self.onInputFocus.bind(self));self.cancel_submit_btn.on("click",self.onCancelSubmitClick.bind(self))};vimeo.share.Email.prototype.expandForm=function(){var self=this,active_class="active";if(!self.email_form.hasClass(active_class)){self.email_form.addClass(active_class);Signal.lightbox.center.dispatch()}try{window.dispatchEvent(new Event("resize"))}catch(e){}};vimeo.share.Email.prototype.resetForm=function(){var self=this;self.active_input.val("");self.active_input.one("focus",self.onInputFocus.bind(self)).attr("readonly",false);self.message_input.val("");self.object_id.val("");self.email_form.removeClass("active");self.failure_banner.hide();self.success_banner.hide();self.enableSendButton();Signal.forager.input.clear.dispatch();Signal.lightbox.center.dispatch();try{window.dispatchEvent(new Event("resize"))}catch(e){}};vimeo.share.Email.prototype.getRecipients=function(){var self=this,recipients={uids:[],emails:[],total:0},selected;selected=self.forager.collection.getSelected();if(!selected.length){return false}$.each(selected,function(i,model){if(+model.user_id===-1&&model.email){recipients.emails.push(model.email)}else{recipients.uids.push(model.user_id)}recipients.total++});return recipients};vimeo.share.Email.prototype.validateInput=function(val){if(!val||val.length>0){return/^(?:[a-z0-9!#$%&'*+\/=?\^_`{|}~-]\.?){0,63}[a-z0-9!#$%&'*+\/=?\^_`{|}~-]@(?:(?:[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?\.)*[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\])$/i.test(val)}return false};vimeo.share.Email.prototype.disableSendButton=function(){var self=this,sending_text=self.submit_btn.attr("data-sending-text");self.submit_btn.attr("disabled","disabled").text(sending_text)};vimeo.share.Email.prototype.enableSendButton=function(){var self=this,send_text=self.submit_btn.attr("data-send-text");self.submit_btn.attr("disabled",false).text(send_text)};vimeo.share.Email.prototype.resetCaptcha=function(){if(typeof grecaptcha!=="undefined"){grecaptcha.reset()}};vimeo.share.Email.prototype.onInputKeydown=function(e){if(EMAIL_CONFIRM_KEYS.indexOf(e.keyCode)>-1){e.preventDefault();Signal.forager.user.add_email.dispatch();Signal.forager.input.clear.dispatch();Signal.forager.filter.selected.dispatch()}};vimeo.share.Email.prototype.onInputFocus=function(e){this.expandForm();if(this.cancel_timeout){clearTimeout(this.cancel_timeout);delete this.cancel_timeout}};vimeo.share.Email.prototype.onCancelSubmitClick=function(e){e.preventDefault();this.resetForm()};vimeo.share.Email.prototype.submitForm=function(e){var self=this,recipients,total_recipients,request_data;e.preventDefault();if(self.submit_btn.attr("disabled")===true||e.keyCode===KEYS.ENTER){return}self.no_recipients.hide();recipients=self.getRecipients();if(!recipients){if(!self.validateInput(self.forager.search.value)){self.no_recipients.show();return}Signal.forager.user.add_email.dispatch();recipients=self.getRecipients()}total_recipients=recipients.total;request_data={action:"send_message",user_ids:recipients.uids.join(","),user_emails:recipients.emails.join(","),message:self.message_input.val(),token:vimeo.xsrft,object_id:self.object_id.val()};if(typeof grecaptcha!=="undefined"){var recaptcha_response=grecaptcha.getResponse();self.recaptcha_error.hide();if(recaptcha_response===""){self.recaptcha_error.show();return}else{request_data["g-recaptcha-response"]=recaptcha_response}}if(self.clip_id){$.ajax({url:"/"+self.clip_id,type:"post",data:{action:"log_onsite_click",type:"player2_share_email",clip_id:self.clip_id,context:"none",token:vimeo.xsrft}})}$.ajax({url:self.email_form.attr("action"),method:self.email_form.attr("method"),data:request_data,success:self.onFormSuccess.bind(self),error:self.onFormFail.bind(self)});self.disableSendButton();Signal.forager.user.update_favorites.dispatch()};vimeo.share.Email.prototype.onFormSubmit=function(e){e.preventDefault();this.submitForm(e)};vimeo.share.Email.prototype.onFormSuccess=function(e){var self=this;self.failure_banner.hide();self.success_banner.show();self.forager.collection.deselectAll();self.resetCaptcha();self.enableSendButton();self.email_form.on("click",function(e){self.clicked_email_form=true});self.cancel_timeout=setTimeout(function(){self.success_banner.hide();self.email_form.off("click");if(!self.clicked_email_form){self.resetForm()}self.clicked_email_form=false},3500)};vimeo.share.Email.prototype.onFormFail=function(e){var self=this;self.resetCaptcha();self.enableSendButton();self.failure_banner.show()};vimeo.share.Email.prototype.setActive=function(){this.active_input.focus()}})(vimeo.ui.forager.Main);namespace("vimeo.share");(function(){"use strict";vimeo.share.Embed=function(clip_id){var self=this;self.clip_id=clip_id;if(!self.clip_id){throw new Error("No clip id passed to social share module.")}self.createElements();self.attachEvents();self.refreshSettings();self.onSettingsChanged(null,null,self.settings)};vimeo.share.Embed.prototype.createElements=function(){var self=this,starting_color_value;self.toggle_trigger=$("#embed_customize_toggle");self.original_values={width:$("#embed_orig_width").val(),height:$("#embed_orig_height").val()};self.input_map={width:$("#embed_width"),height:$("#embed_height"),title:$("#embed_title"),byline:$("#embed_byline"),badge:$("#embed_badge"),portrait:$("#embed_portrait"),autoplay:$("#embed_autoplay"),loop:$("#embed_loop"),link:$("#embed_link"),caption:$("#embed_description"),color:$("#embed_color"),responsive:$("#embed_responsive")};self.messages=$("#embed_messages");self.embed_container=$("#embed_preview");self.warnings={size:$("#size_alert"),outro:$("#outro_alert"),autoplay:$("#autoplay_alert"),loop:$("#loop_alert"),text_alert:$("#text_alert"),link_alert:$("#link_alert"),caption_alert:$("#caption_alert"),link_caption_alert:$("#link_caption_alert"),responsive:$("#responsive_alert")};self.resized_width=$("#embed_preview_width");self.settings={};self.preview_player=null;self.option_change_timer=null;self.option_change_ajax_timer=null;self.preview_player_color_timer=null;self.player_api_properties=["color","portrait","badge","title","byline","byline_badge","like_button","watch_later_button","share_button","embed_button","hd_button","playbar","volume","fullscreen_button","scaling_button","vimeo_logo"];self.text_area=$("#embed_code");self.embed_messages=$("#embed_messages");self.code_is_active=false;self.color_picker_toggle=$("#color_picker_toggle");starting_color_value=self.input_map.color.val();if(starting_color_value.substr(0,1)==="#"){self.input_map.color.val(starting_color_value.substr(1))}self.setDimensionElemWidth();self.createColorPicker()};vimeo.share.Embed.prototype.attachEvents=function(){var self=this,toggle_box=self.toggle_trigger.data("togglebox");if(toggle_box){toggle_box.on("open",self.onSettingsOpened.bind(self));toggle_box.on("close",self.onSettingsClosed.bind(self))}$.each(self.input_map,function(key,value){if(value.length){value.on("change",self.onOptionChange.bind(self))}});self.input_map.width.on("keyup",self.onDimensionKeyup.bind(self));self.input_map.width.on("blur",self.onDimensionBlur.bind(self));self.input_map.height.on("keyup",self.onDimensionKeyup.bind(self));self.input_map.height.on("blur",self.onDimensionBlur.bind(self));$("#embed_customize .color_block").on("click",self.onStaticColorSelected.bind(self));self.input_map.color.on("keydown",self.onColorKeyDown.bind(self));self.text_area.on("click",self.onTextAreaClick.bind(self));Signal.player.ready.add(self.onPlayerReady.bind(self))};vimeo.share.Embed.prototype.refresh=function(changed,delay){var self=this,request_data=self.settings||{};request_data.clip_id=self.clip_id;if(!changed){return}request_data.iframe=true;clearTimeout(self.option_change_ajax_timer);self.option_change_ajax_timer=setTimeout(function(){$.ajax({url:"/embed",data:request_data,success:self.onEmbedCodeSuccess.bind(self)})},delay||0)};vimeo.share.Embed.prototype.refreshSettings=function(){var self=this;$.each(self.input_map,function(key,val){if(self.input_map[key].length){self.settings[key]=self.getValueForInput(val)}})};vimeo.share.Embed.prototype.refreshAndSaveSettings=function(){var self=this;self.refreshSettings();self.savePreferences()};vimeo.share.Embed.prototype.resetWarnings=function(){var self=this;self.messages.hide();$.each(self.warnings,function(key,item){if(item.length){item.hide()}})};vimeo.share.Embed.prototype.createColorPicker=function(changed){var self=this,start_color=self.input_map.color.val();if(!self.color_picker_toggle.length){return}if($.cookie("embed_preferences")){start_color=JSON.parse($.cookie("embed_preferences")).color}if(!self.color_picker_toggle.colpick){self.color_picker_toggle.hide();return}self.color_picker_toggle.colpick({extraClass:"color_picker_share",color:start_color,layout:"hex",submitText:Copy.dict.select,onChange:self.onColorPickerUpdate.bind(self),onSubmit:self.onColorPickerSelect.bind(self),onHide:function(){self.refreshEmbedPlayerPreview("color",self.settings.color);self.color_picker_toggle.colpickSetColor(self.settings.color)}})};vimeo.share.Embed.prototype.updateColorInput=function(color,do_update){var self=this,hex;if(color){hex=typeof color==="string"?color:color.hex.toLowerCase();if(hex.substr(0,1)==="#"){hex=hex.substr(1)}}self.input_map.color.val(hex);if(do_update===true){self.settings.color=hex;self.onSettingsChanged("color",hex,self.settings,300)}else{self.refreshEmbedPlayerPreview("color",hex)}};vimeo.share.Embed.prototype.savePreferences=function(){var self=this,stored_settings=$.extend({},self.settings),preferences,new_settings={};delete stored_settings.height;delete stored_settings.iframe;delete stored_settings.loop;delete stored_settings.autoplay;$.each(self.settings,function(key,value){if(stored_settings.hasOwnProperty(key)){new_settings[key]=value}});preferences=JSON.stringify(new_settings);$.cookie("embed_preferences",preferences,{domain:vimeo.domain,path:"/"})};vimeo.share.Embed.prototype.resetSize=function(){var self=this;self.input_map.width.val(self.original_values.width);self.input_map.height.val(self.original_values.height)};vimeo.share.Embed.prototype.calculateSize=function(dimension){var self=this,opposite_dimension,ratio;if(dimension==="x"||dimension==="width"){opposite_dimension=self.input_map.height.val();ratio=self.original_values.width/self.original_values.height}else if(dimension==="y"||dimension==="height"){opposite_dimension=self.input_map.width.val();ratio=self.original_values.height/self.original_values.width}else{throw new Error("Invalid direction")}return Math.round(opposite_dimension*ratio)};vimeo.share.Embed.prototype.getValueForCheckbox=function(checkbox){return checkbox[0].checked?1:0};vimeo.share.Embed.prototype.getValueForInput=function(input){if(input[0].type==="checkbox"){return this.getValueForCheckbox(input)}return input.val()};vimeo.share.Embed.prototype.getDimensionIncrementAmount=function(use_inverse,do_jump){var JUMP_AMOUNT=10,increment_amount=!!use_inverse?-1:1;if(!!do_jump){increment_amount*=JUMP_AMOUNT}return increment_amount};vimeo.share.Embed.prototype.checkWarnings=function(settings){var self=this;self.resetWarnings();if(self.settings.autoplay===1){self.messages.show();self.warnings.autoplay.show()}if(self.settings.loop===1){self.messages.show();self.warnings.loop.show()}if(self.settings.link===1||settings.caption===1){self.messages.show();self.warnings.text_alert.show();if(settings.caption===1&&settings.link===1){self.warnings.link_caption_alert.show("inline")}else if(settings.caption===1){self.warnings.caption_alert.show("inline")}else if(settings.link===1){self.warnings.link_alert.show("inline")}}if(settings.width>500){self.messages.show();self.warnings.size.show();if(self.resized_width.length){self.resized_width.text(settings.width)}}if(settings.width<300||settings.height<170){self.warnings.outro.show()}if(parseInt(self.input_map.responsive.val(),10)===1){self.warnings.responsive.show()}};vimeo.share.Embed.prototype.refreshEmbedPlayerPreview=function(property,value){var self=this;if(self.player_api_properties.indexOf(property)<0){return}if(!self.preview_player){self.preview_player=PlayerManager.getPlayer(self.embed_container[0])}if(property==="color"){if(value.substr(0,1)==="#"){value=value.substr(1)}try{clearTimeout(self.preview_player_color_timer);self.preview_player_color_timer=setTimeout(function(){self.preview_player.color=value},200)}catch(x){}}else{try{self.preview_player._setEmbedSetting(property,value)}catch(x){}}};vimeo.share.Embed.prototype.selectEmbedCode=function(){var self=this;self.text_area.select();self.text_area.focus()};vimeo.share.Embed.prototype.update=function(embed_code){var self=this;self.text_area.val(embed_code);if(self.code_is_active===true){self.code_is_active=false}};vimeo.share.Embed.prototype.triggerOptionFlash=function(){var self=this;if(!self.text_area.hasClass("blink")){self.text_area.addClass("blink")}clearTimeout(self.option_change_timer);self.option_change_timer=setTimeout(function(){self.text_area.removeClass("blink")},200)};vimeo.share.Embed.prototype.onEmbedCodeSuccess=function(data){var self=this;self.update($.trim(data));self.triggerOptionFlash()};vimeo.share.Embed.prototype.onOptionChange=function(e){var self=this,setting=$(e.target),key;self.refreshAndSaveSettings();$.each(self.input_map,function(k,el){if(setting[0]===el[0]){key=k;return false}});if(!key){return console.warn("Unknown key for "+setting)}self.onSettingsChanged(key,self.getValueForInput(setting),self.settings)};vimeo.share.Embed.prototype.setDimensionElemWidth=function(){var self=this,width_input=self.input_map.width[0],height_input=self.input_map.height[0],longer_input;if(!width_input||!height_input){return}if(width_input.value.length>height_input.value.length){longer_input=width_input}else{longer_input=height_input}var len=longer_input.value.length;if(len<4){width_input.style.width="40px";height_input.style.width="40px"}else if(len===4){width_input.style.width="50px";height_input.style.width="50px"}else if(len==5){width_input.style.width="60px";height_input.style.width="60px"}else{width_input.style.width="70px";height_input.style.width="70px"}};vimeo.share.Embed.prototype.onDimensionKeyup=function(e){var self=this,el=$(e.target),code=e.keyCode,key=e.key,number_key=code>47&&code<58||code>95&&code<106,modifier_key=key==="delete"||key==="backspace"||key==="tab"||key==="left"||key==="right"||key==="up"||key==="down",valid_key=number_key&&!e.shift||modifier_key,width_input=self.input_map.width,height_input=self.input_map.height,increment=1;if(!valid_key){e.preventDefault();return}self.setDimensionElemWidth();if(number_key&&!e.shift||key==="up"||key==="down"){if(key==="up"||key==="down"){increment=self.getDimensionIncrementAmount(key==="down",e.shift);el.val(parseInt(el.val(),10)+increment)}if(el[0]===width_input[0]){height_input.val(self.calculateSize("height"))}else{width_input.val(self.calculateSize("width"))}}el.trigger("change")};vimeo.share.Embed.prototype.onDimensionBlur=function(e){var self=this;$.each([self.input_map.width,self.input_map.height],function(i,input){if(!input.val()){self.resetSize()}})};vimeo.share.Embed.prototype.onStaticColorSelected=function(e){e.preventDefault();var self=this,btn=$(e.target);self.updateColorInput(btn.attr("data-hex"),true)};vimeo.share.Embed.prototype.onColorKeyDown=function(e){console.log("Color keydown")};vimeo.share.Embed.prototype.onColorPickerUpdate=function(hsb,hex){this.updateColorInput(hex)};vimeo.share.Embed.prototype.onColorPickerSelect=function(hsb,hex){var self=this;self.updateColorInput(hex,true);self.refreshAndSaveSettings();self.color_picker_toggle.colpickHide()};vimeo.share.Embed.prototype.onSettingsChanged=function(property,value,settings,delay){var self=this;self.refresh(true,delay);self.checkWarnings(settings||{});self.refreshEmbedPlayerPreview(property,value)};vimeo.share.Embed.prototype.onSettingsOpened=function(){var self=this,embed_customize=$("#embed_customize");if(typeof vimeo.GlobalDesktop!=="undefined"){vimeo.GlobalDesktop.triggerResize()}if(embed_customize&&self.messages){embed_customize.append(self.messages)}window.dispatchEvent(new Event("resize"))};vimeo.share.Embed.prototype.onSettingsClosed=function(){if(typeof vimeo.GlobalDesktop!=="undefined"){vimeo.GlobalDesktop.triggerResize()}};vimeo.share.Embed.prototype.onPlayerReady=function(player){var embedPreviewPlayer=$("#embed_preview .player");if(embedPreviewPlayer.length){this.preview_player=player}};vimeo.share.Embed.prototype.onTextAreaClick=function(e){var self=this,textarea=$(e.target),expanded_class="expanded";if(!textarea.hasClass(expanded_class)){textarea.addClass(expanded_class)}if(!textarea.attr("data-ios")){e.preventDefault();self.selectEmbedCode()}setTimeout(function(){Signal.lightbox.center.dispatch();if(typeof vimeo.GlobalDesktop!=="undefined"){vimeo.GlobalDesktop.triggerResize()}},500)};vimeo.share.Embed.prototype.setActive=function(){var self=this;if(self.toggle_trigger){self.toggle_trigger.trigger("click")}}})();namespace("vimeo.share");(function(){"use strict";var default_options={modules:["Social","Email","Embed"],active_module:null,clip_id:null};vimeo.share.Main=function(options){var self=this;self.options=$.extend({},default_options,options);self.modules={};$.each(self.options.modules,function(i,module){self.modules[module.toLowerCase()]=new vimeo.share[module](self.options.clip_id,self.options.referrer_context)});self.attachSignals();return self};vimeo.share.Main.prototype.attachSignals=function(){Signal.lightbox.opened.add(function shareLightboxOpened(){Signal.share.lightbox.opened.dispatch()})};vimeo.share.Main.prototype.refreshTracking=function(referrer_context){var self=this,modules=self.modules,module;for(module in modules){if(modules.hasOwnProperty(module)&&typeof modules[module].refreshTracking==="function"){modules[module].refreshTracking(referrer_context)}}}})();